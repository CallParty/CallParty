dist: trusty
sudo: required

language: node_js

python: "2.7"

services:
  - mongodb

addons:
  apt:
    sources:
    - mongodb-3.2-trusty
    packages:
    - mongodb-org-server

branches:
  only:
    - master
    - staging
    - prod

before_install:
  - mkdir -p $TRAVIS_BUILD_DIR/backend/devops/secret_files && echo {} >> $TRAVIS_BUILD_DIR/backend/devops/secret_files/secret.json

install:
  - cd $TRAVIS_BUILD_DIR/backend && npm install
  - cd $TRAVIS_BUILD_DIR/frontend && npm install

script:
  - cd $TRAVIS_BUILD_DIR/backend && eslint .
  - cd $TRAVIS_BUILD_DIR/backend && npm test
  - cd $TRAVIS_BUILD_DIR/frontend && eslint .
  - cd $TRAVIS_BUILD_DIR/frontend && npm test
